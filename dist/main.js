!function(t){var n={};function i(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=n,i.d=function(t,n,e){i.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,n){if(1&n&&(t=i(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(i.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)i.d(e,o,function(n){return t[n]}.bind(null,o));return e},i.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(n,"a",n),n},i.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},i.p="",i(i.s=0)}([function(t,n,i){"use strict";i.r(n);var e={containerId:"__uipx-container",diffCanvasId:"__uipx-canvas",imgBase64Name:"imgBase64",sizeCheckName:"sizeCheck",followCheckName:"followCheck",canvasPResetName:"canvasPReset",opacityChangeName:"opacityChange",carpCheckName:"carpCheck",staffGaugeName:"staffGauge",microActionName:"microAction",colorListName:"colorList"},o=()=>{const t=document.createElement("div");t.id=e.containerId,t.innerHTML='\n  <div id="__uipx-switch">uipx</div>\n  <div id="__uipx-modal">\n    \x3c!-- UI图片 --\x3e \n    <div class="__uipx-level __uipx-img-box">\n      <div id="__uipx-img-box">\n        <img src="" alt="" id="__uipx-img" style="display: none;">\n      </div>\n    </div>\n    \x3c!-- 点击组 --\x3e\n    <div class="__uipx-level __uipx-btn-group">\n      <button class="__uipx-btn __uipx-btn-img __uipx-btn-default">\n        选择UI\n        <input type="file" id="__uipx-picfile" name="picFile" />\n      </button>\n      <button id="__uipx-reset" class="__uipx-btn __uipx-btn-default">位置恢复</button>\n    </div>\n    \x3c!-- 点选组 --\x3e\n    <div class="__uipx-level __uipx-check-group">\n      <button id="__uipx-size-check" class="__uipx-btn">使用原始尺寸</button>\n      <button id="__uipx-follow-check" class="__uipx-btn">同步滚动</button>\n      <button id="__uipx-carp-check" class="__uipx-btn">反相</button>\n      <button id="__uipx-sg-check" class="__uipx-btn">标尺</button>\n    </div>\n    <div class="__uipx-level __uipx-change-opacity">\n      调节透明度：\n      <button class="__uipx-round-btn __uipx-icon-cut">-</button>\n      <input type="number" name="cpi" id="__uipx-cpi">\n      <button class="__uipx-round-btn __uipx-icon-add">+</button>\n    </div>\n    \x3c!-- 微调 --\x3e\n    <div class="__uipx-level __uipx-micro-box">\n      位置微调：\n      <div class="__uipx-micro-content">\n        <button class="__uipx-round-btn __uipx-micro-top" title="点击上移1px">↑</button>\n        <p class="__uipx-micro-line">\n          <button class="__uipx-round-btn __uipx-micro-left" title="点击左移1px">←</button>\n          <button class="__uipx-round-btn __uipx-micro-right" title="点击右移1px">→</button>\n        </p>\n        <button class="__uipx-round-btn __uipx-micro-bottom" title="点击下移1px">↓</button>\n      </div>\n    </div>\n    \x3c!-- 需要完全透明的颜色值 --\x3e\n    <div class="__uipx-level __uipx-shear-color">\n      <div class="__uipx-shear-title">\n        <span>透明色值(rgb)：</span>\n        <button id="__uipx-add-color-btn" class="__uipx-btn __uipx-btn-default">Add</button>\n      </div>\n      <ul id="__uipx-color-list">\n      </ul>\n    </div>\n  </div>\n  <div id="__uipx-mask" class="__uipx-mask-overview"></div>\n<style>\n  #__uipx-switch {\n    position: fixed;\n    left: 0;\n    bottom: 0;\n    color: #FFF;\n    background-color: #ff5555;\n    line-height: 1;\n    font-size: 14px;\n    padding: 10px 22px;\n    border-radius: 4px;\n    box-shadow: 0 0 8px rgba(0, 0, 0, 0.4);\n    z-index: 10000;\n  }\n  #__uipx-modal {\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    max-height: 85%;\n    padding: 20px;\n    box-sizing: border-box;\n    overflow-y: scroll;\n    transform: translateY(100%);\n    transition: transform ease-out 0.3s;\n    background-color: #fff;\n    z-index: 10002;\n  }\n  #__uipx-modal.__uipx-modal-show {\n    transform: translateY(0);\n  }\n  #__uipx-mask {\n    position: fixed;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    opacity: 0;\n    transition: opacity ease-out 0.3s;\n    background-color: #000;\n    z-index: 10001;\n  }\n  #__uipx-mask.__uipx-mask-overview {\n    transform: translateY(100%);\n  }\n  #__uipx-mask.__uipx-mask-show {\n    transform: translateY(0);\n    opacity: 0.6;\n  }\n  .__uipx-level {\n    margin-bottom: 16px;\n  }\n  #__uipx-img-box {\n    position: relative;\n    font-size: 0;\n    text-align: center;\n  }\n  #__uipx-img-box #__uipx-img {\n    max-width: 200px;\n    max-height: 200px;\n  }\n  .__uipx-img-del {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    cursor: pointer;\n    opacity: 0;\n    background-color: rgba(0,0,0,.3);\n    transition: opacity .3s;\n  }\n  .__uipx-img-del-txt {\n    font-size: 16px;\n    color: #fff;\n  }\n  .__uipx-img-del:hover {\n    opacity: 1;\n  }\n  /* 管理需要完全透明的颜色值 */\n  .__uipx-shear-color #__uipx-color-list {\n    margin: 0;\n    margin-block-start: 0;\n    margin-block-end: 0;\n    padding-inline-start: 0;\n  }\n  .__uipx-shear-color .__uipx-color-item {\n    list-style: none;\n  }\n  .__uipx-shear-color .__uipx-color-item input {\n    width: 50px;\n  }\n  /* canvas */\n  #__uipx-canvas {\n    position: fixed;\n    top: 0;\n    left: 0;\n    z-index: 9998;\n  }\n  /* 通用按钮 */\n  .__uipx-btn {\n    line-height: 26px;\n    padding: 0 16px;\n    outline: none;\n    -webkit-tap-highlight-color:rgba(0,0,0,0);\n    border: 1px solid rgb(248, 248, 248);\n    box-sizing: border-box;\n    font-size: 13px;\n    background-color: rgb(248, 248, 248);\n    border-radius: 26px;\n  }\n  .__uipx-round-btn {\n    display: inline-block;\n    width: 24px;\n    height: 24px;\n    line-height: 24px;\n    -webkit-tap-highlight-color:rgba(0,0,0,0);\n    text-align: center;\n    outline: none;\n    color: #fff;\n    border: none;\n    border-radius: 50%;\n    background-color: #ff5555;\n  }\n  .__uipx-btn-default {\n    color: #fff;\n    background-color: #ff5555;\n  }\n  .__uipx-btn-img {\n    position: relative;\n  }\n  #__uipx-picfile {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    outline: none;\n    opacity: 0;\n  }\n  /* 按钮选中的样式 */\n  .__uipx-btn-active {\n    border-color: #ff5555;;\n    color: #ff5555;;\n  }\n  /* 透明度调节 */\n  input[id="__uipx-cpi"]::-webkit-outer-spin-button,\n  input[id="__uipx-cpi"]::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n  }\n  input[id="__uipx-cpi"]{\n    width: 70px;\n    line-height: 24px;\n    border-radius: 12px;\n    background-color: rgb(248, 248, 248);\n    border: none;\n    text-align: center;\n    outline: none;\n    -moz-appearance: textfield;\n  }\n  /* 透明色值 */\n  .__uipx-shear-title {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-bottom: 8px\n  }\n  .__uipx-color-item {\n    margin-bottom: 6px;\n  }\n  .__uipx-color-item input {\n    line-height: 23px;\n    outline: none;\n    border: 1px solid rgb(248, 248, 248);\n  }\n  .__uipx-del-color-btn {\n    padding: 4px 10px;\n    margin-left: 10px;\n    border-radius: 12px;\n    border: none;\n    outline: none;\n  }\n  /* 微调按钮 */\n  .__uipx-micro-box {\n    display: flex;\n    align-items: center;\n  }\n  .__uipx-micro-content {\n    position: relative;\n    width: 150px;\n    text-align: center;\n  }\n  .__uipx-micro-content::before, .__uipx-micro-content::after {\n    position: absolute;\n    content: \'\';\n    background-color: #ff5555;\n  }\n  .__uipx-micro-content::before {\n    top: 50%;\n    left: 30px;\n    right: 30px;\n    height: 1px;\n  }\n  .__uipx-micro-content::after {\n    top: 30px;\n    bottom: 30px;\n    left: 50%;\n    width: 1px;\n  }\n  .__uipx-micro-content button:hover {\n    cursor: pointer;\n  }\n  .__uipx-micro-line {\n    display: flex;\n    justify-content: space-between;\n  }\n  /* 标尺相关 */\n  #__uipx-staff-gauge {\n    position: fixed;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    z-index: 9999;\n  }\n  #__uipx-staff-gauge p {\n    margin: 0;\n  }\n  .__uipx-line-a, .__uipx-line-b {\n    position: absolute;\n    left: 0;\n    right: 0;\n    cursor: n-resize;\n  }\n  .__uipx-line-a {\n    z-index: 9;\n  }\n  .__uipx-line-b {\n    z-index: 8;\n  }\n  .__uipx-line-mid {\n    position: absolute;\n    left: 0;\n    right: 0;\n    height: 1px;\n    background-color: #61ffff;\n  }\n  .__uipx-tm-dis {\n    position: absolute;\n    left: 40px;\n    width: 1px;\n  }\n  .__uipx-dis-half-a, .__uipx-dis-half-b {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 1px;\n    background-color: #61ffff;\n  }\n  .__uipx-distance-txt {\n    position: absolute;\n    top: 50%;\n    left: 0;\n    transform: translate(-50%, -50%);\n    font-size: 16px;\n    white-space: nowrap;\n    color: #ff5555;\n  }\n\n  .__uipx-vertical-line-box .__uipx-line-a {\n    z-index: 11;\n  }\n  .__uipx-vertical-line-box .__uipx-line-b {\n    z-index: 10;\n  }\n  .__uipx-vertical-line-box .__uipx-line-mid {\n    top: 0;\n    bottom: 0;\n    height: 100%;\n    width: 1px;\n  }\n  .__uipx-vertical-line-box .__uipx-tm-dis {\n    top: 40px;\n    height: 1px;\n  }\n  .__uipx-vertical-line-box .__uipx-dis-half-a, .__uipx-vertical-line-box .__uipx-dis-half-b {\n    top: 0;\n    left: 0;\n    height: 1px;\n  }\n  .__uipx-vertical-line-box .__uipx-distance-txt {\n    left: 50%;\n    top: 0;\n    transform: translate(-50%, -50%);\n  }\n  /* toast组件 */\n  .__uipx-toast {\n    position: fixed;\n    left: 50%;\n    bottom: 80px;\n    max-width: 150px;\n    margin: 0;\n    padding: 6px 12px;\n    font-size: 12px;\n    color: #fff;\n    border-radius: 4px;\n    background-color: rgba(109, 111, 115, 0.88);\n    transform: translateX(-50%);\n    z-index: 10010;\n  }\n</style>',document.body.appendChild(t),(()=>{const t=document.getElementById("__uipx-switch"),n=document.getElementById("__uipx-modal"),i=document.getElementById("__uipx-mask"),e="__uipx-mask-show",o="__uipx-mask-overview",s="__uipx-modal-show";let a=0,l=0,r=0,c=0,u=0;const p=window.innerWidth-t.offsetWidth,h=-(window.innerHeight-t.offsetHeight);let d=0,x=0;function _(){n.classList.toggle(s),i.classList.contains(e)?i.classList.toggle(e):(i.classList.toggle(e),i.classList.toggle(o))}t.addEventListener("touchstart",function(t){t.preventDefault(),u=+new Date,r=t.changedTouches[0].clientX,c=t.changedTouches[0].clientY}),t.addEventListener("touchmove",function(n){n.preventDefault(),d=n.changedTouches[0].clientX-r+a,x=n.changedTouches[0].clientY-c+l,d<0?d=0:d>p&&(d=p),x>0?x=0:x<h&&(x=h),t.style.transform=`translate(${d}px, ${x}px)`}),t.addEventListener("touchend",function(n){n.preventDefault(),+new Date-u<200&&_();const i=t.style.transform.match(/translate\(([-+]?[\d\.]+)px,\s*([-+]?[\d\.]+)px\)/)||[0,0,0];a=+i[1],l=+i[2]}),i.addEventListener("click",_),i.addEventListener("transitionend",function(t){"opacity"!==t.propertyName||i.classList.contains(e)||i.classList.toggle(o)})})()};let s=document.createElement("p");s.className="__uipx-toast";let a=null;function l(t){return t.startsWith("#")?document.getElementById(t.slice(1)):document.querySelectorAll(t)}const r=window.innerHeight,c=window.innerWidth,u="__uipx-staff-gauge",p="__uipx-horizontal-line-box",h="__uipx-vertical-line-box",d="__uipx-line-a",x="__uipx-line-b",_="__uipx-line-mid",m="__uipx-tm-dis",f="__uipx-dis-half-a",g="__uipx-distance-txt",b="__uipx-dis-half-b";class v{constructor(t=!0){this.lineBox=null,this.lineA=this.activeLine=null,this.lineB=null,this.isHorizontal=t,this.startPosition=0,this.tmDisPosition=0,this.line1Position=0,this.line2Position=0,this.tmDis={activeType:0,node:null,children:{disHalfA:null,distanceTxt:null,disHalfB:null}},this.sgContainer=this.getContainer(),this.bwlineName=this.isHorizontal?"clientY":"clientX",this.measureTransName=this.isHorizontal?"X":"Y",this.measureLineName="client"+this.measureTransName}init(){this.initDOM(),this.initPosition(),this.initListener()}initDOM(){this.lineBox=y(this.isHorizontal?p:h),this.lineA=this.activeLine=y(d),this.isHorizontal||(this.lineA.style.height=r+"px");const t=y(_,"p");this.lineA.appendChild(t),this.lineBox.appendChild(this.lineA),this.lineB=this.lineA.cloneNode(!0),this.lineB.className=x,this.lineBox.appendChild(this.lineB),this.tmDis.node=y(m,"p"),[f,g,b].forEach(t=>{this.tmDis.children[t.replace("__uipx-","").replace(/-\w/g,t=>t.slice(1).toUpperCase())]=this.tmDis.node.appendChild(y(t,"span"))});const n=this.isHorizontal?"height":"width",i=this.isHorizontal?"top":"left";this.lineB.style[n]=this.lineA.style[n]="29px",this.tmDis.node.style[i]=t.style[i]=this.lineB.children[0].style[i]="14px",this.lineA.appendChild(this.tmDis.node),this.sgContainer.appendChild(this.lineBox)}initPosition(){const t=Math.round(this.isHorizontal?r/3:c/3);this.line1Position=t,this.line2Position=2*t,this.moveTo(t),this.activeLine=this.lineB,this.moveTo(2*t)}initListener(){this.sgContainer.addEventListener("touchstart",this.sgContainerStart.bind(this),{passive:!1}),this.sgContainer.addEventListener("touchmove",this.sgContainerMove.bind(this),{passive:!1}),this.sgContainer.addEventListener("touchend",this.sgContainerEnd.bind(this),{passive:!1})}getContainer(){return this.sgContainer=document.getElementById(u),this.sgContainer||(this.sgContainer=document.createElement("div"),this.sgContainer.id=u,document.body.appendChild(this.sgContainer)),this.sgContainer}resetTranslateY(){const t=new RegExp(/translate[XY]\(([-+]?[\d\.]+)px\)/);this.line1Position=+this.lineA.style.transform.match(t)[1],this.line2Position=+this.lineB.style.transform.match(t)[1],this.tmDisPosition=+(this.tmDis.node.style.transform.match(t)||[0,0])[1]}changeVisible(t){this.sgContainer.style.display=t?"":"none"}moveTo(t){t=Math.round(t);let n=this.activeLine===this.lineA?this.line2Position-t:t-this.line1Position;n<0?0===this.tmDis.activeType&&(this.tmDis.activeType=1,this.lineB.appendChild(this.lineA.removeChild(this.tmDis.node))):n>0&&1===this.tmDis.activeType&&(this.tmDis.activeType=0,this.lineA.appendChild(this.lineB.removeChild(this.tmDis.node))),n=Math.abs(n);const i=this.isHorizontal?"height":"width",e=this.isHorizontal?15:30;this.activeLine.style.transform=`translate${this.isHorizontal?"Y":"X"}(${t}px)`,this.tmDis.node.style[i]=n+"px",this.tmDis.children.disHalfA.style[i]=this.tmDis.children.disHalfB.style[i]=n/2-e+"px",this.tmDis.children.disHalfB.style[this.isHorizontal?"top":"left"]=n/2+e+"px",this.tmDis.children.distanceTxt.textContent=n+"px"}sgContainerStart(t){t.preventDefault(),t.target===this.lineA||t.target.parentNode===this.lineA?(this.activeLine=this.lineA,this.startPosition=t.changedTouches[0][this.bwlineName]):t.target===this.lineB||t.target.parentNode===this.lineB?(this.activeLine=this.lineB,this.startPosition=t.changedTouches[0][this.bwlineName]):t.target===this.tmDis.node||t.target.parentNode===this.tmDis.node?(this.activeLine=this.tmDis.node,this.startPosition=t.changedTouches[0][this.measureLineName]):(this.activeLine=null,this.startPosition=0),this.activeLine&&this.touchStartCB&&this.touchStartCB()}sgContainerMove(t){t.preventDefault(),this.activeLine&&(this.activeLine===this.tmDis.node?this.tmDis.node.style.transform=`translate${this.measureTransName}(${t.changedTouches[0][this.measureLineName]-this.startPosition+this.tmDisPosition}px)`:this.moveTo(t.changedTouches[0][this.bwlineName]-this.startPosition+this[this.activeLine===this.lineA?"line1Position":"line2Position"]))}sgContainerEnd(t){t.preventDefault(),this.activeLine&&(this.touchEndCB&&this.touchEndCB(),this.resetTranslateY())}}function y(t,n){const i=document.createElement(n||"div");return i.className=t,i}const w=document.documentElement.clientWidth||document.body.clientWidth;let C=null;function L({name:t,data:n}){if(console.log("handler",t,n),t===e.imgBase64Name||t===e.carpCheckName||t===e.sizeCheckName)return k.init(n);if(!C)return console.log("必须初始化 canvas");const i={[e.canvasPResetName](){N.reset(),B.baseScroll=0},[e.opacityChangeName](){var t;t=n,C.style.opacity=t},[e.followCheckName](){B.change(n)},[e.staffGaugeName](){z.change(n)},[e.microActionName](){!function({x:t=0,y:n=0}){N.moveBy(t,n),N.correctXY()}(n)}}[t];i?i():console.log("未处理的消息：",t,n)}const k={container:document.body,bgData:null,pixels:null,init(t){this.bgData=t;const n=this.getCtx(),i=document.createElement("img");i.src=t.base64,i.onload=(()=>{const e=t.isUseUISize?i.width:w,o=C.style.width.slice(0,-2)!==String(e),s=i.width/e,a=i.height/s;C.width=e,C.height=a,C.style.width=e+"px",C.style.height=a+"px",n.clearRect(0,0,e,a),n.drawImage(i,0,0,e,a);const l=n.getImageData(0,0,e,a);this.pixels=l.data,this.setOpacity(),this.setColorReverse(),n.clearRect(0,0,e,a),n.putImageData(l,0,0),this.container.appendChild(C),o&&N.reset()})},setOpacity(){const t=this.bgData.opacityColorList;if(t&&t.length){const t=this.pixels;for(let n=0;n<t.length;n+=4)this.isOpacityFit(n)&&(t[n+3]=0)}},setColorReverse(){if(this.bgData.isColorReverse){const t=this.pixels;for(let n=0;n<t.length;n+=4)0!==t[n+3]&&(t[n+0]=255-t[n+0],t[n+1]=255-t[n+1],t[n+2]=255-t[n+2])}},getCtx:()=>((C=document.getElementById(e.diffCanvasId))||((C=document.createElement("canvas")).id=e.diffCanvasId),D.init(),C.getContext("2d")),isOpacityFit(t){return this.bgData.opacityColorList.some(n=>this.pixels[t]===n[0]&&this.pixels[t+1]===n[1]&&this.pixels[t+2]===n[2])}},N={x:0,y:0,moveBy(t,n){C.style.transform=`translate(${null===t?this.x:this.x+t}px, ${null===n?this.y:this.y+n}px)`},reset(){this.x=0,this.y=0,this.moveBy(0,0)},correctXY(){const t=C.style.transform.match(/translate\(([-+]?[\d\.]+)px,\s*([-+]?[\d\.]+)px\)/);t&&(this.x=+t[1],this.y=+t[2])}},D={startX:0,startY:0,init(){C.addEventListener("touchstart",this.touchstartFn,{passive:!1}),C.addEventListener("touchmove",this.touchmoveFn,{passive:!1}),C.addEventListener("touchend",this.touchendFn,{passive:!1})},destory(){C.removeEventListener("touchstart",this.touchstartFn),C.removeEventListener("touchmove",this.touchmoveFn),C.removeEventListener("touchend",this.touchendFn)},touchstartFn(t){t.preventDefault(),E.change(!0),D.startX=t.changedTouches[0].clientX,D.startY=t.changedTouches[0].clientY},touchmoveFn(t){t.preventDefault(),N.moveBy(t.changedTouches[0].clientX-D.startX,t.changedTouches[0].clientY-D.startY)},touchendFn(t){t.preventDefault(),N.correctXY(),setTimeout(()=>{E.change(!1)},16)}},B={isFollowPage:!1,baseScroll:0,reset(){this.isFollowPage=!1,this.baseScroll=0},change(t){this.isFollowPage=t,N.correctXY(),t?(this.baseScroll=window.scrollY,D.destory(),window.addEventListener("scroll",this.canvasScrollByPage)):(this.baseScroll=0,D.init(),window.removeEventListener("scroll",this.canvasScrollByPage))},canvasScrollByPage(){N.moveBy(null,-window.scrollY+B.baseScroll)}},E={originBodyOver:document.body.style.overflow,isLock:!1,change(t){this.isLock=void 0!==t?t:!this.isLock,document.body.style.overflow=this.isLock?"hidden":this.originBodyOver}},z={rulerH:null,rulerV:null,change(t){this.rulerH||(this.rulerH=new v,this.rulerH.init(),this.rulerV=new v(!1),this.rulerV.init()),this.rulerH.changeVisible(t)}};let P=null,T=null,A=[],H=!1,S=!1;const Y="__uipx-btn-active",I="__uipx-color-item",F="__uipx-del-color-btn",O="__uipx-micro-top",X="__uipx-micro-right",R="__uipx-micro-bottom",M="__uipx-micro-left";let U=null,j=null,$=null,W=null;function V(){if(U.files.length){const t=U.files[0],n=new FileReader;n.onload=(t=>{T=t.target.result,lt()}),n.readAsDataURL(t)}}function G(){$.value<0?$.value=0:$.value>10&&($.value=10),L({name:e.opacityChangeName,data:$.value/10})}function q(t){$.value=+$.value+t,G()}function J(){L({name:e.canvasPResetName})}function K(){this.classList.toggle(Y),S=this.classList.contains(Y),at(e.sizeCheckName)}function Q(){this.classList.toggle(Y),L({name:e.followCheckName,data:this.classList.contains(Y)})}function Z(){this.classList.toggle(Y),H=!H,at(e.carpCheckName)}function tt(){this.classList.toggle(Y),L({name:e.staffGaugeName,data:this.classList.contains(Y)})}function nt(){W.appendChild(st())}function it(t){t.target.classList.contains(F)&&(t.target.parentNode.parentNode.removeChild(t.target.parentNode),ot(),at())}function et(t){const n=t.target.classList,i={x:0,y:0};n.contains(O)?i.y=-1:n.contains(X)?i.x=1:n.contains(R)?i.y=1:n.contains(M)&&(i.x=-1),(i.x||i.y)&&L({name:e.microActionName,data:i})}async function ot(){const t=[].map.call(l("."+I),t=>[].reduce.call(t.querySelectorAll("input"),(t,n)=>n.value?t.concat(+n.value):t,[]));JSON.stringify(t)!==JSON.stringify(A)&&(A=t,at())}function st(t=null){let n=document.createElement("li");n.className=I;let i=document.createElement("input");i.type="number";let e=document.createElement("button");return e.className=`__uipx-btn-default ${F}`,e.textContent="Delete",["r","g","b"].forEach((e,o)=>{(i=i.cloneNode(!0)).name=e,i.placeholder=e,t&&(i.value=t[o]),i.addEventListener("blur",function(){var t;t=this,[].every.call(t.parentNode.childNodes,t=>"input"!==t.tagName.toLowerCase()||t.value)&&ot()}),n.appendChild(i)}),n.appendChild(e),n}async function at(t=e.imgBase64Name){L({name:t,data:{base64:T,opacityColorList:A,isColorReverse:H,isUseUISize:S}})}function lt(){T&&(j.src=T,j.style.display="inline-block",at())}window.UIPX=function(t){T=(P=t||{}).diffImg,S=P.isUseUISize,o(),U=l("#__uipx-picfile"),j=l("#__uipx-img"),$=l("#__uipx-cpi"),W=l("#__uipx-color-list"),$.value="10",P.opacityColorList&&(A=P.opacityColorList,P.opacityColorList.forEach(t=>{W.appendChild(st(t))})),lt(),function(){const t=[{ele:U,listenerName:"change",fn:V},{ele:$,listenerName:"change",fn:G},{ele:l(".__uipx-icon-add")[0],listenerName:"click",fn(){q(1)}},{ele:l(".__uipx-icon-cut")[0],listenerName:"click",fn(){q(-1)}},{ele:l("#__uipx-reset"),listenerName:"click",fn:J},{ele:l("#__uipx-size-check"),listenerName:"click",fn:K},{ele:l("#__uipx-follow-check"),listenerName:"click",fn:Q},{ele:l("#__uipx-carp-check"),listenerName:"click",fn:Z},{ele:l("#__uipx-sg-check"),listenerName:"click",fn:tt},{ele:l("#__uipx-add-color-btn"),listenerName:"click",fn:nt},{ele:l("#__uipx-color-list"),listenerName:"click",fn:it},{ele:l(".__uipx-micro-content")[0],listenerName:"click",fn:et}],n=(t,n)=>{if(t.ele!==U&&!T)return function(t){clearTimeout(a),s.textContent=t,document.body.appendChild(s),a=setTimeout(()=>{document.body.removeChild(s)},1500)}("请选择对比的UI图");t.fn.call(t.ele,n)};t.forEach(t=>{t.ele.addEventListener(t.listenerName,i=>{n(t,i)})})}()}}]);